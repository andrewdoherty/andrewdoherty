(function($){$.extend($.fx.step,{backgroundPosition:function(fx){if(fx.pos===0&&typeof fx.end=="string"){var start=$.css(fx.elem,"backgroundPosition")||$.css(fx.elem,"backgroundPositionX")+" "+$.css(fx.elem,"backgroundPositionY");start=toArray(start);fx.start=[start[0],start[2]];var end=toArray(fx.end);fx.end=[end[0],end[2]];fx.unit=[end[1],end[3]]}var nowPosX=[];nowPosX[0]=(fx.end[0]-fx.start[0])*fx.pos+fx.start[0]+fx.unit[0];nowPosX[1]=(fx.end[1]-fx.start[1])*fx.pos+fx.start[1]+fx.unit[1];fx.elem.style.backgroundPosition=
nowPosX[0]+" "+nowPosX[1];function toArray(strg){strg=strg.replace(/left|top/g,"0px");strg=strg.replace(/right|bottom/g,"100%");strg=strg.replace(/([0-9\.]+)(\s|\)|$)/g,"$1px$2");var res=strg.match(/(-?[0-9\.]+)(px|\%|em|pt)\s(-?[0-9\.]+)(px|\%|em|pt)/);return[parseFloat(res[1],10),res[2],parseFloat(res[3],10),res[4]]}}});$.fn.fancyUnderline=function(options){function makeGif(r,g,b){function rgbToBase64(r,g,b){function convert(bits){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".substr(bits,
1)}return""+convert(r>>4)+convert((r<<2&63)+(g>>6))+convert(g&63)+convert(b>>2)+convert(b<<4&63)}var black="R0lGODdh6AMBAIAAAAAAAAAAACwAAAAA6AMBAAACHoSPqcvtD6OctNqLs968+w+G4kiW5omm6sq27gs7BQA7";return""+"url(data:image/gif;base64,"+black.substr(0,17)+rgbToBase64(r,g,b)+black.substr(22)+")"}function addStyle(options){function getRGB(color){var hex=/#(..)(..)(..)/.exec(color);if(hex)return[parseInt(hex[1],16),parseInt(hex[2],16),parseInt(hex[3],16)];hex=/#(.)(.)(.)/.exec(color);if(hex)return[parseInt(hex[1]+
hex[1],16),parseInt(hex[2]+hex[2],16),parseInt(hex[3]+hex[3],16)];var rgb=/rgb\((.*),(.*),(.*)\)/.exec(color);if(rgb)return[parseInt(rgb[1]),parseInt(rgb[2]),parseInt(rgb[3])];return null}var className=options.className+"_"+$.fn.fancyUnderline.state.counter;$.fn.fancyUnderline.state.counter+=1;var rgb=getRGB(options.color);backgroundUrl=rgb?makeGif.apply(null,rgb):options.color;$("body").append("<style>"+"."+className+" {"+"  background: "+backgroundUrl+" no-repeat -1000px bottom;"+"</style>");return className}
function width(el){var style=el.currentStyle||window.getComputedStyle(el,"");var inline=style.display=="inline";if(!inline)return el.offsetWidth;var width;if(fancy.options.cacheWidth){width=$.data(el,"fancyUnderlineWidth");if(width)return width}var clone=document.createElement("span");clone.setAttribute("style","white-space: nowrap; padding; 0; position: absolute; visibility: hidden;");clone.innerHTML=el.innerHTML;el.appendChild(clone);width=clone.offsetWidth;el.removeChild(clone);if(fancy.options.cacheWidth)$.data(el,
"fancyUnderlineWidth",width);return width}function animateOptions(width,baseOptions){if(baseOptions.duration||!baseOptions.speed)return baseOptions;var duration=width/baseOptions.speed*1E3;return $.extend({duration:duration},baseOptions)}function hover(e){var width=fancy.width(this);var options=fancy.animateOptions(width,fancy.options.animateOptions);$(this).stop();$(this).css({backgroundPosition:-1E3+"px bottom"});$(this).animate({backgroundPosition:-1E3+width+"px bottom"},options)}function unhover(e){var width=
fancy.width(this);var options=fancy.animateOptions(width,fancy.options.animateOptions);var originalComplete=options.complete;options.complete=function(){fancy.finishUnhover.call(this);if(originalComplete)originalComplete.apply(this,arguments)};$(this).stop();$(this).css({backgroundPosition:0+"px bottom"});$(this).animate({backgroundPosition:width+"px bottom"},options)}function finishUnhover(){$(this).css({backgroundPosition:"1000px bottom"})}var fancy={options:$.extend({},$.fn.fancyUnderline.defaults,
options),width:width,animateOptions:animateOptions,finishUnhover:finishUnhover};if(fancy.options.duration&&fancy.options.speed)delete fancy.options.duration;$(this).data("fancyUnderline",fancy);var className=addStyle(fancy.options);$(this).addClass(className);$(this).hover(hover,unhover);return this};$.fn.fancyUnderline.state={counter:0};$.fn.fancyUnderline.defaults={className:"fancyUnderLine",color:"#33d",animateOptions:{speed:500,easing:"linear"},cacheWidth:false}})(jQuery);